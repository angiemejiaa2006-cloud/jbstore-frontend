<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Carrito | JB STORE</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: 'Arial', sans-serif;
    }

    h1, h2, h3 {
      color: #F5B400;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #111;
      color: white;
      margin-top: 20px;
      border-radius: 10px;
      overflow: hidden;
    }

    th, td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid #333;
    }

    th {
      background-color: #F5B400;
      color: #000;
    }

    tr:hover {
      background-color: rgba(245, 180, 0, 0.2);
    }

    .btn {
      background-color: #F5B400;
      color: #000;
      border: none;
      padding: 8px 12px;
      border-radius: 5px;
      font-weight: bold;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    .btn:hover {
      background-color: #ffcc00;
    }

    .total {
      margin-top: 20px;
      font-size: 1.3rem;
      color: #F5B400;
      font-weight: bold;
    }

    footer {
      background-color: #000;
      color: #F5B400;
      padding: 15px 0;
      text-align: center;
      margin-top: 40px;
      border-top: 1px solid #F5B400;
    }
  </style>
</head>
<body>

  
  <nav class="navbar navbar-expand-lg navbar-dark bg-black py-3 border-bottom border-warning">
    <div class="container">
      <a class="navbar-brand fw-bold fs-3 text-warning" href="index.html">JB STORE</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#menu">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="menu">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item"><a class="nav-link text-warning" href="index.html">Inicio</a></li>
          <li class="nav-item"><a class="nav-link text-warning" href="productos.html">Productos</a></li>
          <li class="nav-item"><a class="nav-link text-warning active" href="carrito.html">Carrito</a></li>
          <li class="nav-item"><a class="nav-link text-warning" href="contacto.html">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>


  <section class="container py-5 text-center">
    <h1 class="fw-bold mb-4">Tu Carrito de Compras üõí</h1>

    <div id="carritoContainer">
      <p>Cargando tu carrito...</p>
    </div>

    <div class="total" id="totalCarrito"></div>
  </section>

  
  <footer>
    <p class="mb-0">¬©Ô∏è 2025 JB STORE - Todos los derechos reservados</p>
  </footer>

  <script>
document.addEventListener('DOMContentLoaded', () => {
  const contenedor = document.getElementById('carritoContainer') || document.getElementById('carrito-contenido');
  const totalDiv = document.getElementById('totalCarrito') || document.getElementById('totalCarrito') || document.createElement('div');
  if (!contenedor) return;


  let vaciarBtn = document.getElementById('vaciar-carrito');
  let comprarBtn = document.getElementById('comprar');
  const accionesContainerId = 'acciones-carrito';
  let accionesContainer = document.getElementById(accionesContainerId);

  if (!accionesContainer) {
    accionesContainer = document.createElement('div');
    accionesContainer.id = accionesContainerId;
    accionesContainer.style.textAlign = 'center';
    accionesContainer.style.marginTop = '12px';
    // intentar insertar despu√©s del contenedor
    contenedor.parentNode.insertBefore(accionesContainer, contenedor.nextSibling);
  }

  if (!vaciarBtn) {
    vaciarBtn = document.createElement('button');
    vaciarBtn.id = 'vaciar-carrito';
    vaciarBtn.className = 'btn btn-danger me-2';
    vaciarBtn.textContent = 'Vaciar Carrito';
    accionesContainer.appendChild(vaciarBtn);
  } else {
    // mover al contenedor de acciones si existe
    accionesContainer.appendChild(vaciarBtn);
  }

  if (!comprarBtn) {
    comprarBtn = document.createElement('button');
    comprarBtn.id = 'comprar';
    comprarBtn.className = 'btn btn-warning fw-bold';
    comprarBtn.textContent = 'Finalizar Compra';
    accionesContainer.appendChild(comprarBtn);
  } else {
    accionesContainer.appendChild(comprarBtn);
  }

  function leerCarrito() {
    try {
      const raw = localStorage.getItem('carrito');
      return raw ? JSON.parse(raw) : [];
    } catch (e) {
      console.error('Error parseando carrito:', e);
      return [];
    }
  }

  function guardarCarrito(carrito) {
    localStorage.setItem('carrito', JSON.stringify(carrito));
    renderizar(); // actualizar vista
  }

  
  function renderizar() {
    const carrito = leerCarrito();

    if (!carrito || carrito.length === 0) {
      contenedor.innerHTML = '<p class="text-center">Tu carrito est√° vac√≠o üõçÔ∏è</p>';
      if (totalDiv && totalDiv.parentNode == null) {
        accionesContainer.parentNode.insertBefore(totalDiv, accionesContainer);
      }
      totalDiv.textContent = '';
      return;
    }

    let total = 0;
    const tabla = document.createElement('table');
    tabla.style.width = '100%';
    tabla.style.borderCollapse = 'collapse';
    tabla.innerHTML = `
      <thead>
        <tr style="background:#111;color:#fff;">
          <th style="padding:10px;">Imagen</th>
          <th style="padding:10px;">Producto</th>
          <th style="padding:10px;">Talla</th>
          <th style="padding:10px;">Precio</th>
          <th style="padding:10px;">Acci√≥n</th>
        </tr>
      </thead>
      <tbody></tbody>
    `;
    const tbody = tabla.querySelector('tbody');

    carrito.forEach((p, i) => {
      total += (p.precio || 0) * (p.cantidad || 1);
      const tr = document.createElement('tr');
      tr.style.borderBottom = '1px solid #333';

      tr.innerHTML = `
        <td style="padding:10px;text-align:center;"><img src="${p.imagen}" alt="${p.nombre}" width="80" style="border-radius:6px;"></td>
        <td style="padding:10px;text-align:left;vertical-align:middle;">${p.nombre}</td>
        <td style="padding:10px;text-align:center;vertical-align:middle;">${p.talla ? p.talla : '-'}</td>
        <td style="padding:10px;text-align:center;vertical-align:middle;">$${(p.precio||0).toLocaleString()}</td>
        <td style="padding:10px;text-align:center;vertical-align:middle;">
          <button class="btn btn-sm btn-danger btn-eliminar" data-index="${i}">Eliminar</button>
        </td>
      `;
      tbody.appendChild(tr);
    });

    
    contenedor.innerHTML = '';
    contenedor.appendChild(tabla);

    
    totalDiv.textContent = `Total: $${total.toLocaleString()}`;
    totalDiv.className = 'total';

    
    if (totalDiv.parentNode == null) {
      contenedor.parentNode.insertBefore(totalDiv, contenedor.nextSibling);
    }
  }


  contenedor.addEventListener('click', (e) => {
    if (e.target && e.target.classList.contains('btn-eliminar')) {
      const idx = parseInt(e.target.dataset.index, 10);
      let carrito = leerCarrito();
      if (!isNaN(idx) && idx >= 0 && idx < carrito.length) {
        carrito.splice(idx, 1);
        localStorage.setItem('carrito', JSON.stringify(carrito));
        renderizar();
      }
    }
  });

 
  vaciarBtn.addEventListener('click', () => {
    if (!confirm('¬øSeguro que quieres vaciar el carrito?')) return;
    localStorage.removeItem('carrito');
    renderizar();
  });

  
  comprarBtn.addEventListener('click', () => {
    const carrito = leerCarrito();
    if (!carrito || carrito.length === 0) {
      alert('Tu carrito est√° vac√≠o.');
      return;
    }

    if (confirm('Confirmar compra. Esto vaciar√° el carrito.')) {
      localStorage.removeItem('carrito');
      alert('¬°Compra realizada! Gracias por tu compra üéâ');
      renderizar();
      // opcional: redirigir a p√°gina de gracias
      // window.location.href = 'gracias.html';
    }
  });


  renderizar();
});
</script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
